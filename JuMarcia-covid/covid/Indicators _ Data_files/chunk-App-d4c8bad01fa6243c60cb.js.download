webpackJsonp([3],{60:function(e,t,a){a(145),e.exports=self.fetch.bind(self)},117:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT=t.SERVER_ROOT=void 0,t.checkStatus=r;var o=a(115),l=a(9),i=a(60);n(i),t.SERVER_ROOT=o.isLocal?"http://localhost:"+o.port:l.ENV_LOCALE_LINKS_MAP[o.env][l.DEFAULT_LOCALE],t.ROOT=""},137:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a=d.ROOT+"/config/"+e+".json";return t=t||e,function(e,n){var r=(0,f.configSelector)(n()).get(t);return r?i["default"].resolve():(0,u["default"])(a).then(d.checkStatus).then(function(e){return e.json()}).then(function(a){return e({type:c.CONFIG_UPDATE_CONFIG,payload:{data:a,key:t}})})["catch"](function(n){return 404==n.response.status?console.error("Fetching "+a+" 404ed"):console.error("Fetching "+a+" failed",n),e({type:c.CONFIG_UPDATE_CONFIG,payload:{data:{},key:t}})})}}function o(){return function(e,t){var a=(0,p.localeSelector)(t());return i["default"].all([e(r("front_page/"+a+"_front_page_config")),e(r("front_page/"+a+"_front_page_featured")),e(r("front_page/"+a+"_front_page_blog_posts")),e(r("front_page/"+a+"_front_page_blog_posts_rss"))])}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(38),i=n(l);t.fetchConfig=r,t.fetchFrontPageConfig=o;var s=a(60),u=n(s),c=a(71),d=a(117),f=a(31),p=a(14)},145:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,a){e.onload=function(){t(e.result)},e.onerror=function(){a(e.error)}})}function l(e){var t=new FileReader;return t.readAsArrayBuffer(e),o(t)}function i(e){var t=new FileReader;return t.readAsText(e),o(t)}function s(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},h.blob?(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(l)},this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=r(this);return e?e:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function c(e,t){t=t||{};var a=t.body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,a||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new n(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var a=e.split("="),n=a.shift().replace(/\+/g," "),r=a.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(r))}}),t}function f(e){var t=new n,a=e.getAllResponseHeaders().trim().split("\n");return a.forEach(function(e){var a=e.trim().split(":"),n=a.shift().trim(),r=a.join(":").trim();t.append(n,r)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){n.prototype.append=function(e,n){e=t(e),n=a(n);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(n)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var a=this.map[t(e)];return a?a[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,n){this.map[t(e)]=[a(n)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(a){this.map[a].forEach(function(n){e.call(t,n,a,this)},this)},this)};var h={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},s.call(c.prototype),s.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];p.redirect=function(e,t){if(g.indexOf(t)===-1)throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=c,e.Response=p,e.fetch=function(e,t){return new Promise(function(a,n){function r(){return"responseURL"in l?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):void 0}var o;o=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var l=new XMLHttpRequest;l.onload=function(){var e=1223===l.status?204:l.status;if(e<100||e>599)return void n(new TypeError("Network request failed"));var t={status:e,statusText:l.statusText,headers:f(l),url:r()},o="response"in l?l.response:l.responseText;a(new p(o,t))},l.onerror=function(){n(new TypeError("Network request failed"))},l.open(o.method,o.url,!0),"include"===o.credentials&&(l.withCredentials=!0),"responseType"in l&&h.blob&&(l.responseType="blob"),o.headers.forEach(function(e,t){l.setRequestHeader(t,e)}),l.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},380:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var a=e.length?e:[e];return 0===q["default"].difference(a.map(function(e){return e.id}),t.map(function(e){return e.id})).length&&0===q["default"].difference(t.map(function(e){return e.id}),a.map(function(e){return e.id})).length&&t.length>0}function l(){this&&this.isMounted&&this.setState({value:"",opened:!1,highlightedItem:null})}function i(e,t){var a=e.option,n=a.apiMeta,r=a.label,o=a.matches,l=void 0===o?[]:o,i=n&&n.label?n.label:r;return d(l,i,t)}function s(e){var t=e.getBoundingClientRect(),a=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,r=function(e,t){return document.elementFromPoint(e,t)};return!(t.right<0||t.bottom<0||t.left>a||t.top>n)&&(e.contains(r(t.left,t.top))||e.contains(r(t.right,t.top))||e.contains(r(t.right,t.bottom))||e.contains(r(t.left,t.bottom)))}function u(e){return q["default"].deburr(q["default"].toLower(e).replace(/[\(\).,’'"&\*+;:-]/g," ").replace(/’/g,"").replace(/\s+/g," ").trim())}function c(e,t,a){var n=e.length;if(0==n)return[];var r,o=0,l=[];for(a||(t=t.toLowerCase(),e=e.toLowerCase());(r=t.indexOf(e,o))>-1;)l.push(r),o=r+n;return l}function d(e,t,a){var n=q["default"].flatten(u(a).toLowerCase().split(" ").map(function(e){return c(e,t).map(function(t){return{from:t,till:t+e.length,fat:!0}})}));n=G["default"].values(G["default"].uniqBy(function(e){var t=e.from,a=e.to;return t+" - "+a},q["default"].sortBy(n,"from").filter(function(e){return!n.filter(function(t){return!(t.from===e.from&&t.till===e.till)}).some(function(t){return e.from>=t.from&&e.till<=t.till})})));var r=[];q["default"].reduce(n,function(e,t){return r.push({from:e.till,till:t.from,fat:!1}),t}),q["default"].head(n)&&0!==q["default"].head(n).from&&(r=[{from:0,till:q["default"].head(n).from,fat:!1}].concat(r)),q["default"].last(n)&&q["default"].last(n).till!==t.length&&(r=r.concat([{from:q["default"].last(n).till,till:t.length,fat:!1}]),n.push({dummyForExhaustingInterleave:!0,from:0,till:0,fat:!1})),r.length<n.length&&r.push({from:0,till:0});var o=(0,q["default"])(q["default"].zip(n,r)).flatten().sortBy("from").map(function(e,a){return e.fat?A["default"].createElement("b",{key:a},t.slice(e.from,e.till)):A["default"].createElement("span",{key:a},t.slice(e.from,e.till))}).value();return o.length>0?o:t}function f(e,t){return{allSearches:e.indicators.get("searchResults"),locale:(0,Z.localeSelector)(e,t),results:(0,$.latestSearchResultsSelector)(e).map(function(e){return e.map(h)}),selected:(0,ee.getSelectionIds)((0,$.multiSelectionSelector)(e,t)),values:(0,$.multiSelectionMetaSelector)(e,t)}}function p(e){return(0,L.bindActionCreators)({changeSelection:Y.changeSelection,search:W.search,updateUrlNameMappings:W.updateUrlNameMappings,clearCache:W.clearCache},e)}function h(e){return{id:e.value,option:e}}Object.defineProperty(t,"__esModule",{value:!0});var m,g,y,v,E,b=a(64),w=r(b),_=a(7),T=r(_),I=a(4),S=r(I),N=a(8),k=r(N),C=a(6),P=r(C),M=a(5),O=r(M),R=a(2),A=r(R),x=a(112),D=a(12),F=a(19),L=a(26),B=a(183),U=r(B),j=a(3),q=r(j),H=a(41),G=r(H),V=a(138),W=n(V),K=a(33),Y=n(K),Q=a(118),z=a(9),X=a(87),J=r(X),$=a(18),Z=a(14),ee=a(101),te=a(100),ae=r(te),ne=a(118),re=(A["default"].createElement(D.FormattedMessage,{defaultMessage:"Search data e.g. GDP, population, Indonesia",id:"multiselect-placeholder"}),function(e,t){return void 0!==e.get(t)&&null!==e.get(t)&&(e.get(t)||[]).length>0||void 0!==e.get(t.trim())&&null!==e.get(t.trim())&&(e.get(t.trim())||[]).length>0}),oe=function(e,t){return"pending"===e.get(t)};t["default"]=(0,D.injectIntl)((m=(0,F.connect)(f,p),g=(0,J["default"])(["onfocus","onclick","click"]),m(y=g((E=v=function(e){function t(){(0,S["default"])(this,t);var e=(0,P["default"])(this,(0,T["default"])(t).call(this));return e.onDefocus=e.onDefocus.bind(e),e.onInputChange=e.onInputChange.bind(e),e.state={value:""},e}return(0,O["default"])(t,e),(0,k["default"])(t,[{key:"componentWillMount",value:function(){var e=this;this.notify=q["default"].debounce(function(t){(0,ne.SearchboxQuery)(t);var a=(0,j.flatten)((0,j.values)(e.props.selected)).join("-"),n=q["default"].trim(t);n.length>0&&"zh"==e.props.intl.locale?e.props.search(n,a,e.props.locale):n.length>2&&e.props.search(n,a,e.props.locale)},300),this.setState({selected:this.props.values})}},{key:"componentWillUnmount",value:function(){this.notify.cancel&&this.notify.cancel()}},{key:"componentDidUpdate",value:function(){var e=this._highlightedElement;if(e&&!s(e)){var t=e.parentNode;t.scrollTop=e.offsetTop-t.offsetTop}}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.selected,n=t.value;a!==e.values&&this.setState({selected:e.values}),this._input&&n!==this._input.value&&this.onInputChange(this._input.value)}},{key:"onDefocus",value:function(e){(0,x.findDOMNode)(this).contains(e.target)||this.setState({opened:!1})}},{key:"onInputChange",value:function(e){var t=this;this.setState({opened:0!==e.length,value:e},function(a){t.notify(e)})}},{key:"navigateIfStaticPage",value:function(e){var t=e.filter(function(e){return"staticPage"===e.category})[0];if(t&&((0,Q.NavigationViaSearchbox)(location.origin+t.value.slice(2)),window.location=t.value.slice(2),setTimeout(function(){return window.location=t.value.slice(2)},1e3)),t)return!0}},{key:"onSelectionChange",value:function(e){0===e.length&&this.props.clearCache();var t=this.navigateIfStaticPage(e);t||(this.props.updateUrlNameMappings(e),this.props.changeSelection(e))}},{key:"compare",value:function(e,t){if(e.length>1||"undefined"==typeof e.option||"undefined"==typeof t.option||"undefined"==typeof e.option.category||"undefined"==typeof t.option.category)return 0;var a=z.CATEGORIES_PRIORITY.indexOf(e.option.category),n=z.CATEGORIES_PRIORITY.indexOf(t.option.category);return a<n?-1:a>n?1:0}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl.formatMessage,n=t.results,r=this.state,o=r.highlightedItem,i=r.opened,s=r.selected,u=r.value,c=[],d=n.map(function(e){return 1===e.length?e[0]:e});d.sort(this.compare);var f=A["default"].createElement("div",{className:"status"},"No results, try to search for different terms or:"),p=A["default"].createElement("div",{className:"searching spinning"});i&&u.length>0&&!function(){var t=function(e){var t=e.id;return q["default"].find(s,{value:t})};d.forEach(function(a,n){a.length?e.addMultipleOptionsOption(c,a,n,d,t,o):e.addSingleOption(c,a,n,d,t,o)}),c=A["default"].createElement("div",null,oe(e.props.allSearches,u)?p:null,A["default"].createElement("ol",null,void 0===e.props.allSearches.get(u)||oe(e.props.allSearches,u)||re(e.props.allSearches,u)?"":f,c))}();var h=s.map(function(t){var a=(0,U["default"])((0,w["default"])({aggregate:t.isAggregate},t.category,!0)),n=t.apiMeta&&(t.apiMeta.fullname||t.apiMeta.shortname)?t.apiMeta.fullname||t.apiMeta.shortname:t.fullname||t.shortname||t.name||t.label||t.value;return A["default"].createElement("span",{className:a,key:t.value},n,A["default"].createElement("button",{onClick:function(){e.remove(t),e.props.onInputFocus(!1)}}))});return A["default"].createElement("div",{className:"search-bar multiSelector"},A["default"].createElement("div",{className:"selector-box",onClick:function(){e._input.focus(),e.props.onInputFocus(!0)}},A["default"].createElement("div",{className:"scroll-box"},h,A["default"].createElement("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",id:"selector",onBlur:function(){setTimeout(function(){e.props.onInputFocus(!1),e.setState({opened:!1}),l()},1e3)},onChange:function(t){t.persist(),e.onInputChange(t.target.value),e.setState({opened:!0}),e.props.onInputFocus(!0)},onKeyDown:function(t){e.handleKeyDown(d,t),e.setState({opened:!0}),e.props.onInputFocus(!0)},placeholder:a({id:"multiselect-placeholder",defaultMessage:"Search data e.g. GDP, population, Indonesia"}),ref:function(t){return e._input=t},spellCheck:"false",tabIndex:0,type:"text",value:u,className:(0,U["default"])({focus:this.state.opened})}))),s.length>0&&A["default"].createElement("button",{className:"clear",onClick:function(){return e.onSelectionChange([])}}),A["default"].createElement("button",{className:(0,U["default"])({open:i}),onClick:function(){e.setState({opened:!i}),e.props.onInputFocus(!i)}}),A["default"].createElement("div",{className:"dropdownBox"},A["default"].createElement("div",{className:"control"},A["default"].createElement("button",{className:"close button secondary",onClick:function(){e.props.onInputFocus(!1),e.setState({opened:!i})}},"Close")),c,A["default"].createElement("p",null,A["default"].createElement(D.FormattedMessage,{defaultMessage:"Browse by",id:"multiselector.browseby"}),A["default"].createElement(ae["default"],{className:"country",to:{pathname:z.LOCATION_PATH},dataCustomLink:"nl:body content",dataText:"country data"},A["default"].createElement(D.FormattedMessage,{defaultMessage:"Country",id:"multiselector.country"})),A["default"].createElement(D.FormattedMessage,{defaultMessage:"or",id:"multiselector.or"}),A["default"].createElement(ae["default"],{to:{pathname:z.INDICATOR_PATH},dataCustomLink:"nl:body content",dataText:"indicator data"},A["default"].createElement(D.FormattedMessage,{defaultMessage:"Indicator",id:"multiselector.indicator"})))))}},{key:"addSingleOption",value:function(e,t,a,n,r,o){var l=this,s=t.id,u=t.option,c=u.category,d=u.isAggregate,f=!!o,p=f&&s===o.id,h=q["default"].find(n,function(e){return!r(e)}),m=h===t,g=p||!f&&m,y=(0,U["default"])((0,w["default"])({aggregate:d,"highlighted-selection":g,"select-item":!0},c,!0));e.push(A["default"].createElement("li",{className:y,key:a,onClick:function(){return l.select(t)},ref:g?function(e){return l._highlightedElement=e}:null},A["default"].createElement("div",null,i(t,this.state.value))))}},{key:"addMultipleOptionsOption",value:function(e,t,a,n,r){var o=this,l=arguments.length<=5||void 0===arguments[5]?[]:arguments[5];l=l&&l.length?l:[];var s=l.length>0,u=0===q["default"].difference(t.map(function(e){return e.id}),l.map(function(e){return e.id})).length&&s||!s&&0===a,c=(0,U["default"])({combined:!0,"highlighted-selection":u,"select-item":!0});e.push(A["default"].createElement("li",{className:c,key:a,onClick:function(){return o.select(t)},ref:u?function(e){return o._highlightedElement=e}:null},A["default"].createElement("ul",null,t.map(function(e,t){return A["default"].createElement("li",{className:(0,U["default"])((0,w["default"])({aggregate:e.option.isAggregate},e.option.category,!0)),key:t},A["default"].createElement("div",null,i(e,o.state.value)))}))))}},{key:"handleKeyDown",value:function(e,t){var a=this.state,n=a.highlightedItem,r=a.selected,o=a.value;switch(t.which){case 38:this.setState({opened:!0}),this.moveUp(e,n),t.preventDefault();break;case 40:this.setState({opened:!0}),this.moveDown(e,n),t.preventDefault();break;case 13:n?(this.select(n),this.setState({highlightedItem:null,value:""})):(this.setState({value:""}),this.select(q["default"].head(e)));break;case 8:this.setState({highlightedItem:null}),r.length>0&&0===o.length&&(this.remove(r[r.length-1]),t.preventDefault());break;case 37:break;case 39:break;default:var l=t.keyCode;9===l||91===l||16===l||37===l||18===l||39===l||20===l||17===t.which||t.altKey||t.metaKey||t.ctrlKey||this.props.clearCache(),this.setState({highlightedItem:null})}}},{key:"select",value:function(e){if(e){if(e.option&&"dataset"==e.option.category)return void window.open(e.option.url,"_blank");e.length?this.selectMultipleOptions(e):this.selectSingleOption(e),this.setState({value:"",opened:!1})}}},{key:"selectSingleOption",value:function(e){var t=this.state.selected,a=e.option,n=a.category,r=a.value;if(!(0,q["default"])(t).map("value").includes(r)){var o="indicator"===n||"topic"===n,l=o?q["default"].filter(t,{category:"location"}):t;this.onSelectionChange(l.concat(e.option))}}},{key:"selectMultipleOptions",value:function(e){var t=this.state.selected,a=e.map(function(e){return e.option.category});(q["default"].find(t,{category:"topic"})||q["default"].find(t,{category:"indicator"}))&&(q["default"].includes(a,"topic")||q["default"].includes(a,"indicator"))||!q["default"].find(t,{category:"topic"})&&!q["default"].find(t,{category:"indicator"})?this.onSelectionChange(t.filter(function(e){return"location"===e.category}).concat(e.map(function(e){return e.option}))):this.onSelectionChange(t.concat(e.map(function(e){return e.option})))}},{key:"remove",value:function(e){var t=this.state.selected.filter(function(t){var a=t.category,n=t.id;return!(e.category===a&&e.id===n)});this.setState({selected:t}),this.onSelectionChange(t)}},{key:"moveUp",value:function(e,t){if(t){var a=t.length?q["default"].findIndex(e,function(e){return o(e,t)}):q["default"].findIndex(e,{id:t.id});0===a?this.setState({highlightedItem:q["default"].last(e)}):this.setState({highlightedItem:q["default"].get(e,a-1)})}else this.setState({highlightedItem:q["default"].last(e)})}},{key:"moveDown",value:function(e,t){if(t){var a=t.length?q["default"].findIndex(e,function(e){return o(e,t)}):q["default"].findIndex(e,{id:t.id}),n=e.length-1;a===n?this.setState({highlightedItem:q["default"].head(e)}):this.setState({highlightedItem:q["default"].get(e,a+1)})}else this.setState({highlightedItem:q["default"].get(e,1,q["default"].head(e))})}}]),t}(R.Component),v.propTypes={changeSelection:R.PropTypes.func.isRequired,clearCache:R.PropTypes.func.isRequired,intl:R.PropTypes.object.isRequired,results:R.PropTypes.array.isRequired,updateUrlNameMappings:R.PropTypes.func.isRequired,values:R.PropTypes.array.isRequired},v.defaultProps={config:{height:500}},y=E))||y)||y)),e.exports=t["default"]},836:function(e,t){},970:function(e,t){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var l=/\+/g;e=e.split(t);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var u=0;u<s;++u){var c,d,f,p,h=e[u].replace(l,"%20"),m=h.indexOf(n);m>=0?(c=h.substr(0,m),d=h.substr(m+1)):(c=h,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),a(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},971:function(e,t){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(r){var o=encodeURIComponent(a(r))+n;return Array.isArray(e[r])?e[r].map(function(e){return o+encodeURIComponent(a(e))}).join(t):o+encodeURIComponent(a(e[r]))}).join(t):r?encodeURIComponent(a(r))+n+encodeURIComponent(a(e)):""}},972:function(e,t,a){"use strict";t.decode=t.parse=a(970),t.encode=t.stringify=a(971)},1141:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return{selectedIndicator:(0,x.selectedIndicatorSelector)(e,t),selectedLocations:(0,x.selectedLocationsSelector)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l,i,s,u,c=a(7),d=r(c),f=a(4),p=r(f),h=a(8),m=r(h),g=a(6),y=r(g),v=a(5),E=r(v),b=a(38),w=(r(b),a(2)),_=r(w),T=a(53),I=a(137),S=a(54),N=a(1150),k=r(N),C=a(560),P=r(C),M=a(380),O=r(M),R=a(23),A=n(R),x=a(18);a(836);var D=(l=(0,T.asyncConnect)([{promise:function(e){var t=e.store,a=t.dispatch,n=t.getState,r=0===(0,x.selectedLocationsSelector)(n()).length,o=[];r?(o.push(a((0,S.fetchRelatedDataSets)())),o.push(a((0,I.fetchFrontPageConfig)()))):o.push(a((0,S.fetchLocationsCard)()))}}],o),l((u=s=function(e){function t(){return(0,p["default"])(this,t),(0,y["default"])(this,(0,d["default"])(t).apply(this,arguments))}return(0,E["default"])(t,e),(0,m["default"])(t,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.selectedIndicator,n=e.selectedLocations,r=n.length>0,o=!a&&!r;return o?_["default"].createElement("div",{className:"wrapper",id:"main"},_["default"].createElement(k["default"],null,_["default"].createElement(O["default"],{onInputFocus:function(){},id:"select-box",location:t,name:"locations-indicators"}))):_["default"].createElement("div",null,r&&_["default"].createElement(P["default"],null))}}]),t}(w.Component),s.propTypes={location:A.historyLocation.isRequired,selectedIndicator:w.PropTypes.string,selectedLocations:w.PropTypes.arrayOf(w.PropTypes.string).isRequired},i=u))||i);t["default"]=D,e.exports=t["default"]},1150:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return{datasets:(0,S.relatedDatasetsSelector)(e,t),frontPageConfig:(0,I.frontPageConfigSelector)(e,t),locale:(0,N.localeSelector)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.FrontPage=void 0;var o,l,i=a(7),s=n(i),u=a(4),c=n(u),d=a(8),f=n(d),p=a(6),h=n(p),m=a(5),g=n(m),y=a(2),v=n(y),E=a(12),b=a(19),w=a(183),_=n(w),T=a(9),I=a(31),S=a(42),N=a(14),k=a(1151),C=n(k),P=a(1152),M=n(P),O=a(72),R=n(O),A=(v["default"].createElement(E.FormattedMessage,{defaultMessage:"http://datacatalog.worldbank.org",id:"frontpage.viewdatacatalogurl"}),v["default"].createElement(E.FormattedMessage,{defaultMessage:"http://blogs.worldbank.org/opendata",id:"frontpage.viewblogsurl"}),v["default"].createElement(E.FormattedMessage,{defaultMessage:"http://data.worldbank.org/news",id:"frontpage.viewnewsurl"}),t.FrontPage=(l=o=function(e){function t(){return(0,c["default"])(this,t),(0,h["default"])(this,(0,s["default"])(t).apply(this,arguments))}return(0,g["default"])(t,e),(0,f["default"])(t,[{key:"renderDate",value:function(e){var t=this.props.intl.formatDate(e,{year:"numeric",month:"short",day:"2-digit"});return"Invalid Date"===t?e:t}},{key:"render",value:function(){var e=this,t=this.props,a=t.datasets,n=t.frontPageConfig,r=t.intl.formatMessage,o=t.locale,l=n||{},i=l.ITEM_CARDS_DATA||[],s=l.TABLE_DATA||[],u=l.TOOL_CARDS_DATA||[],c=l.SHOW_CASE_DATA||[],d=(0,_["default"])("table","catalog",{spinning:!!a&&0===a.length}),f=c.map(function(e){return{title:e.title,description:e.description,graphQuery:{indicators:e.indicator,start:e.startYear,end:e.endYear&&"MRV"===e.endYear?null:e.endYear,locations:e.countries.join(T.URL_QUERY_SEPARATOR),view:e.type,locale:o}}});return v["default"].createElement("div",{id:"homepage",ref:"homepageContext"},(0,R["default"])({description:"World Bank Open Data",title:"World Bank Open Data"}),v["default"].createElement("h1",{className:"app-title"},v["default"].createElement(E.FormattedMessage,{defaultMessage:"World Bank Open Data",description:"Frontpage Main title",id:"frontpage.wbopendataheading"})),v["default"].createElement("h2",{className:"app-description"},v["default"].createElement(E.FormattedMessage,{defaultMessage:"Free and open access to global development data",id:"frontpage.headingsubtext"})),this.props.children,v["default"].createElement("section",{className:"middle"},v["default"].createElement("article",{className:d},v["default"].createElement("h2",{className:"title"},v["default"].createElement(E.FormattedMessage,{defaultMessage:"MOST RECENT",id:"frontpage.mostrecent"})),v["default"].createElement("ul",null,s.slice(0,4).map(function(t,a){return v["default"].createElement("li",{className:"item",key:a},v["default"].createElement("a",{href:t.url?t.url:"#"},v["default"].createElement("h4",{className:"item-title"},t.title),t.author&&v["default"].createElement("span",{className:"author"},t.author,","),v["default"].createElement("span",{className:"date"},e.renderDate(t.date))))})),v["default"].createElement("nav",{className:"nav-bar"},v["default"].createElement("a",{className:"nav-item viewmore",href:r({defaultMessage:"http://data.worldbank.org/news",id:"frontpage.viewnewsurl"})},v["default"].createElement(E.FormattedMessage,{defaultMessage:"View all news",id:"frontpage.viewnews"})),v["default"].createElement("a",{className:"nav-item last viewmore",href:r({defaultMessage:"http://blogs.worldbank.org/opendata",id:"frontpage.viewblogsurl"})},v["default"].createElement(E.FormattedMessage,{defaultMessage:"View all blogs",id:"frontpage.viewblogs"})))),v["default"].createElement(M["default"],{contentArray:f}),i.map(function(t,a){return v["default"].createElement(C["default"],{className:1===a?"image-card":"",date:e.renderDate(t.date),imgPath:t.imgPath,isVideo:t.isVideo,key:a,isEmbed:t.isEmbed,tagName:t.type,title:t.title,url:t.url,href:t.href})}),v["default"].createElement("article",{className:"table"},v["default"].createElement("h2",{className:"title"},v["default"].createElement(E.FormattedMessage,{defaultMessage:"RECENTLY UPDATED DATASETS",id:"frontpage.updatedsets"})),v["default"].createElement("ul",null,(a||[]).map(function(t,a){return v["default"].createElement("li",{className:t.label,key:a},v["default"].createElement("a",{href:t.url},v["default"].createElement("h4",{className:"item-title"},t.name),v["default"].createElement("span",{className:"date"},e.renderDate(t.date))),v["default"].createElement("span",{className:"tip"},t.tip))})),v["default"].createElement("nav",{className:"nav-bar"},v["default"].createElement("a",{className:"viewmore",href:r({defaultMessage:"http://datacatalog.worldbank.org",id:"frontpage.viewdatacatalogurl"})},v["default"].createElement(E.FormattedMessage,{defaultMessage:"View data catalog",id:"frontpage.viewdatacatalog"}))))),v["default"].createElement("section",{className:"bottom"},v["default"].createElement("h2",{className:"list-title"},v["default"].createElement(E.FormattedMessage,{defaultMessage:"More Resources",id:"frontpage.moreresources"})),v["default"].createElement("ul",{className:"tool-card-list"},u.map(function(e,t){return v["default"].createElement("li",{className:"tool-card tool-card-"+e.iconIndex,key:t},v["default"].createElement("a",{href:e.url?e.url:"#",target:"_blank"},v["default"].createElement("span",{className:"icon"}),v["default"].createElement("h4",{className:"title"},e.title),v["default"].createElement("p",{className:"description"},e.description)))}))))}}]),t}(y.Component),o.propTypes={children:y.PropTypes.element,datasets:y.PropTypes.arrayOf(y.PropTypes.object).isRequired,frontPageConfig:y.PropTypes.object.isRequired,intl:y.PropTypes.object.isRequired,locale:y.PropTypes.string},l));t["default"]=(0,b.connect)(r)((0,E.injectIntl)(A))},1151:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.startsWith("/media/")?e:a(387)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o,l,i=a(7),s=n(i),u=a(4),c=n(u),d=a(8),f=n(d),p=a(6),h=n(p),m=a(5),g=n(m),y=a(2),v=n(y),E=(l=o=function(e){function t(){(0,c["default"])(this,t);var e=(0,h["default"])(this,(0,s["default"])(t).call(this));return e.state={pageLoaded:!1},e}return(0,g["default"])(t,e),(0,f["default"])(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.isVideo,a=e.isEmbed;window.pageLoaded&&(t||a)&&this.setState({pageLoaded:!0})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.isVideo,n=t.isEmbed;window.pageLoaded||!a&&!n||!function(){var t=setInterval(function(){window.pageLoaded&&(e.setState({pageLoaded:!0}),clearInterval(t))},50)}()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.date,n=e.imgPath,o=e.isVideo,l=e.isEmbed,i=e.tagName,s=e.title,u=e.href,c=e.url,d=this.state.pageLoaded,f=l?{marginTop:"13px",marginLeft:"13px",width:"calc(100% - 13px)"}:{};return v["default"].createElement("article",{className:"item-card "+(o?"video-card":t)},o||l?d?v["default"].createElement("iframe",{style:f,allowFullScreen:!0,frameBorder:"0",height:l?"360":"315",scrolling:"no",src:c,width:"calc(100% - 13px)"}):v["default"].createElement("noscript",null):v["default"].createElement("figure",{className:"image"},v["default"].createElement("a",{href:c?c:"#"},v["default"].createElement("img",{src:r(n)}))),i&&v["default"].createElement("span",{className:"tag",style:{display:"none"}},i),v["default"].createElement("section",{className:"title-area"},v["default"].createElement("a",{className:"title",href:u?u:c?c:"#"},s),v["default"].createElement("p",{className:"description"},a)))}}]),t}(y.Component),o.propTypes={className:y.PropTypes.string,date:y.PropTypes.string.isRequired,imgPath:y.PropTypes.string,isVideo:y.PropTypes.bool.isRequired,isEmbed:y.PropTypes.bool,tagName:y.PropTypes.string,title:y.PropTypes.string.isRequired,url:y.PropTypes.string},l);t["default"]=E,e.exports=t["default"]},1152:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{
"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r,o,l=a(7),i=n(l),s=a(4),u=n(s),c=a(8),d=n(c),f=a(6),p=n(f),h=a(5),m=n(h),g=a(2),y=n(g),v=a(12),E=a(972),b=a(142),w=a(3),_=n(w),T=a(9),I=(o=r=function(e){function t(){(0,u["default"])(this,t);var e=(0,p["default"])(this,(0,i["default"])(t).call(this));return e.state={displayItemIndex:0,pageLoaded:!1},e}return(0,m["default"])(t,e),(0,d["default"])(t,[{key:"componentWillMount",value:function(){window.pageLoaded&&this.setState({pageLoaded:!0})}},{key:"componentDidMount",value:function(){var e=this;window.pageLoaded||!function(){var t=setInterval(function(){window.pageLoaded&&(e.setState({pageLoaded:!0}),clearInterval(t))},50)}()}},{key:"lazyLoadIframe",value:function(e){var t=this.props.contentArray,a=this.refs["iframe"+e],n=t[e].graphQuery,r=T.SHARE_GRAPH_PATH+"?"+(0,E.stringify)(n);""===a.attributes.src.value&&a.setAttribute("src",r)}},{key:"changeIframe",value:function(e){var t=this.state.displayItemIndex;this.refs["iframe"+t].style.display="none";var a=t+e;this.lazyLoadIframe(a),this.refs["iframe"+a].style.display="block",this.setState({displayItemIndex:a})}},{key:"isCanForward",value:function(){var e=this.state.displayItemIndex,t=this.props.contentArray;return e<t.length-1}},{key:"isCanBackward",value:function(){var e=this.state.displayItemIndex;return e>0}},{key:"navigation",value:function(e){var t=this.isCanForward(),a=this.isCanBackward();e&&!t||!e&&!a||this.changeIframe(e?1:-1)}},{key:"render",value:function(){var e=this.props.contentArray,t=this.state,a=t.displayItemIndex,n=t.pageLoaded,r=_["default"].get(e,a),o=this.isCanForward(),l=this.isCanBackward(),i=e.map(function(e,t){return y["default"].createElement("iframe",{frameBorder:"0",key:t,ref:"iframe"+t,scrolling:"no",src:0===t?T.SHARE_GRAPH_PATH+"?"+(0,E.stringify)(e.graphQuery):"",style:{display:0===t?"block":"none"}})});return y["default"].createElement("article",{className:"item-showcase"},y["default"].createElement("nav",null,y["default"].createElement("p",{className:"showcase-title"},y["default"].createElement(v.FormattedMessage,{defaultMessage:"WHAT YOU CAN LEARN WITH OPEN DATA",id:"showcase.title"})),i.length>1&&y["default"].createElement("div",null,y["default"].createElement("a",{className:o?"forward":"disabled",onClick:this.navigation.bind(this,!0)}),y["default"].createElement("a",{className:"backward "+(l?"":"disabled"),onClick:this.navigation.bind(this,!1)}))),r&&y["default"].createElement("div",null,y["default"].createElement("figure",{className:"image spinning"},y["default"].createElement("img",{className:"placeholder",src:"/assets/images/placeholder.png"}),y["default"].createElement("div",{className:"iframe-container"},n&&i)),y["default"].createElement("a",{href:(0,b.resolveUrlFromQuery)("",r.graphQuery,r.graphQuery.locale)},y["default"].createElement("h4",{className:"title"},r.title),y["default"].createElement("p",{className:"description"},r.description))))}}]),t}(g.Component),r.propTypes={contentArray:g.PropTypes.array.isRequired},r.defaultProps={contentArray:[]},o);t["default"]=I,e.exports=t["default"]}});